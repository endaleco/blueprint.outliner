//esprima
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof exports?exports:e.esprima={})}(this,function(e){"use strict";function t(e,t){if(!e)throw new Error("ASSERT: "+t)}function n(e){return e>=48&&57>=e}function i(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function r(e){return"01234567".indexOf(e)>=0}function a(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function s(e){return 10===e||13===e||8232===e||8233===e}function o(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&yn.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function u(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&yn.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function l(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function c(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function h(e){return"eval"===e||"arguments"===e}function f(e){if(gn&&c(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function p(e,n,i,r,a){var s;t("number"==typeof i,"Comment must have valid position"),En.lastCommentStart>=i||(En.lastCommentStart=i,s={type:e,value:n},kn.range&&(s.range=[i,r]),kn.loc&&(s.loc=a),kn.comments.push(s),kn.attachComment&&(kn.leadingComments.push(s),kn.trailingComments.push(s)))}function m(e){var t,n,i,r;for(t=vn-e,n={start:{line:wn,column:vn-xn-e}};bn>vn;)if(i=Sn.charCodeAt(vn),++vn,s(i))return kn.comments&&(r=Sn.slice(t+e,vn-1),n.end={line:wn,column:vn-xn-1},p("Line",r,t,vn-1,n)),13===i&&10===Sn.charCodeAt(vn)&&++vn,++wn,void(xn=vn);kn.comments&&(r=Sn.slice(t+e,vn),n.end={line:wn,column:vn-xn},p("Line",r,t,vn,n))}function d(){var e,t,n,i;for(kn.comments&&(e=vn-2,t={start:{line:wn,column:vn-xn-2}});bn>vn;)if(n=Sn.charCodeAt(vn),s(n))13===n&&10===Sn.charCodeAt(vn+1)&&++vn,++wn,++vn,xn=vn,vn>=bn&&M({},dn.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===Sn.charCodeAt(vn+1))return++vn,++vn,void(kn.comments&&(i=Sn.slice(e+2,vn-2),t.end={line:wn,column:vn-xn},p("Block",i,e,vn,t)));++vn}else++vn;M({},dn.UnexpectedToken,"ILLEGAL")}function y(){var e,t;for(t=0===vn;bn>vn;)if(e=Sn.charCodeAt(vn),a(e))++vn;else if(s(e))++vn,13===e&&10===Sn.charCodeAt(vn)&&++vn,++wn,xn=vn,t=!0;else if(47===e)if(e=Sn.charCodeAt(vn+1),47===e)++vn,++vn,m(2),t=!0;else{if(42!==e)break;++vn,++vn,d()}else if(t&&45===e){if(45!==Sn.charCodeAt(vn+1)||62!==Sn.charCodeAt(vn+2))break;vn+=3,m(3)}else{if(60!==e)break;if("!--"!==Sn.slice(vn+1,vn+4))break;++vn,++vn,++vn,++vn,m(4)}}function S(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(bn>vn&&i(Sn[vn])))return"";r=Sn[vn++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(a)}function g(){var e,t,n,r;for(e=Sn[vn],t=0,"}"===e&&M({},dn.UnexpectedToken,"ILLEGAL");bn>vn&&(e=Sn[vn++],i(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&M({},dn.UnexpectedToken,"ILLEGAL"),65535>=t?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function v(){var e,t;for(e=Sn.charCodeAt(vn++),t=String.fromCharCode(e),92===e&&(117!==Sn.charCodeAt(vn)&&M({},dn.UnexpectedToken,"ILLEGAL"),++vn,e=S("u"),e&&"\\"!==e&&o(e.charCodeAt(0))||M({},dn.UnexpectedToken,"ILLEGAL"),t=e);bn>vn&&(e=Sn.charCodeAt(vn),u(e));)++vn,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Sn.charCodeAt(vn)&&M({},dn.UnexpectedToken,"ILLEGAL"),++vn,e=S("u"),e&&"\\"!==e&&u(e.charCodeAt(0))||M({},dn.UnexpectedToken,"ILLEGAL"),t+=e);return t}function w(){var e,t;for(e=vn++;bn>vn;){if(t=Sn.charCodeAt(vn),92===t)return vn=e,v();if(!u(t))break;++vn}return Sn.slice(e,vn)}function x(){var e,t,n;return e=vn,t=92===Sn.charCodeAt(vn)?v():w(),n=1===t.length?ln.Identifier:f(t)?ln.Keyword:"null"===t?ln.NullLiteral:"true"===t||"false"===t?ln.BooleanLiteral:ln.Identifier,{type:n,value:t,lineNumber:wn,lineStart:xn,start:e,end:vn}}function b(){var e,t,n,i,r=vn,a=Sn.charCodeAt(vn),s=Sn[vn];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++vn,kn.tokenize&&(40===a?kn.openParenToken=kn.tokens.length:123===a&&(kn.openCurlyToken=kn.tokens.length)),{type:ln.Punctuator,value:String.fromCharCode(a),lineNumber:wn,lineStart:xn,start:r,end:vn};default:if(e=Sn.charCodeAt(vn+1),61===e)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return vn+=2,{type:ln.Punctuator,value:String.fromCharCode(a)+String.fromCharCode(e),lineNumber:wn,lineStart:xn,start:r,end:vn};case 33:case 61:return vn+=2,61===Sn.charCodeAt(vn)&&++vn,{type:ln.Punctuator,value:Sn.slice(r,vn),lineNumber:wn,lineStart:xn,start:r,end:vn}}}return i=Sn.substr(vn,4),">>>="===i?(vn+=4,{type:ln.Punctuator,value:i,lineNumber:wn,lineStart:xn,start:r,end:vn}):(n=i.substr(0,3),">>>"===n||"<<="===n||">>="===n?(vn+=3,{type:ln.Punctuator,value:n,lineNumber:wn,lineStart:xn,start:r,end:vn}):(t=n.substr(0,2),s===t[1]&&"+-<>&|".indexOf(s)>=0||"=>"===t?(vn+=2,{type:ln.Punctuator,value:t,lineNumber:wn,lineStart:xn,start:r,end:vn}):"<>=!+-*%&|^/".indexOf(s)>=0?(++vn,{type:ln.Punctuator,value:s,lineNumber:wn,lineStart:xn,start:r,end:vn}):void M({},dn.UnexpectedToken,"ILLEGAL")))}function C(e){for(var t="";bn>vn&&i(Sn[vn]);)t+=Sn[vn++];return 0===t.length&&M({},dn.UnexpectedToken,"ILLEGAL"),o(Sn.charCodeAt(vn))&&M({},dn.UnexpectedToken,"ILLEGAL"),{type:ln.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:wn,lineStart:xn,start:e,end:vn}}function E(e){for(var t="0"+Sn[vn++];bn>vn&&r(Sn[vn]);)t+=Sn[vn++];return(o(Sn.charCodeAt(vn))||n(Sn.charCodeAt(vn)))&&M({},dn.UnexpectedToken,"ILLEGAL"),{type:ln.NumericLiteral,value:parseInt(t,8),octal:!0,lineNumber:wn,lineStart:xn,start:e,end:vn}}function k(){var e,i,a;if(a=Sn[vn],t(n(a.charCodeAt(0))||"."===a,"Numeric literal must start with a decimal digit or a decimal point"),i=vn,e="","."!==a){if(e=Sn[vn++],a=Sn[vn],"0"===e){if("x"===a||"X"===a)return++vn,C(i);if(r(a))return E(i);a&&n(a.charCodeAt(0))&&M({},dn.UnexpectedToken,"ILLEGAL")}for(;n(Sn.charCodeAt(vn));)e+=Sn[vn++];a=Sn[vn]}if("."===a){for(e+=Sn[vn++];n(Sn.charCodeAt(vn));)e+=Sn[vn++];a=Sn[vn]}if("e"===a||"E"===a)if(e+=Sn[vn++],a=Sn[vn],("+"===a||"-"===a)&&(e+=Sn[vn++]),n(Sn.charCodeAt(vn)))for(;n(Sn.charCodeAt(vn));)e+=Sn[vn++];else M({},dn.UnexpectedToken,"ILLEGAL");return o(Sn.charCodeAt(vn))&&M({},dn.UnexpectedToken,"ILLEGAL"),{type:ln.NumericLiteral,value:parseFloat(e),lineNumber:wn,lineStart:xn,start:i,end:vn}}function I(){var e,n,i,a,o,u,l,c,h="",f=!1;for(l=wn,c=xn,e=Sn[vn],t("'"===e||'"'===e,"String literal must starts with a quote"),n=vn,++vn;bn>vn;){if(i=Sn[vn++],i===e){e="";break}if("\\"===i)if(i=Sn[vn++],i&&s(i.charCodeAt(0)))++wn,"\r"===i&&"\n"===Sn[vn]&&++vn,xn=vn;else switch(i){case"u":case"x":"{"===Sn[vn]?(++vn,h+=g()):(u=vn,o=S(i),o?h+=o:(vn=u,h+=i));break;case"n":h+="\n";break;case"r":h+="\r";break;case"t":h+="	";break;case"b":h+="\b";break;case"f":h+="\f";break;case"v":h+="";break;default:r(i)?(a="01234567".indexOf(i),0!==a&&(f=!0),bn>vn&&r(Sn[vn])&&(f=!0,a=8*a+"01234567".indexOf(Sn[vn++]),"0123".indexOf(i)>=0&&bn>vn&&r(Sn[vn])&&(a=8*a+"01234567".indexOf(Sn[vn++]))),h+=String.fromCharCode(a)):h+=i}else{if(s(i.charCodeAt(0)))break;h+=i}}return""!==e&&M({},dn.UnexpectedToken,"ILLEGAL"),{type:ln.StringLiteral,value:h,octal:f,startLineNumber:l,startLineStart:c,lineNumber:wn,lineStart:xn,start:n,end:vn}}function L(e,t){var n;try{n=new RegExp(e,t)}catch(i){M({},dn.InvalidRegExp)}return n}function A(){var e,n,i,r,a;for(e=Sn[vn],t("/"===e,"Regular expression literal must start with a slash"),n=Sn[vn++],i=!1,r=!1;bn>vn;)if(e=Sn[vn++],n+=e,"\\"===e)e=Sn[vn++],s(e.charCodeAt(0))&&M({},dn.UnterminatedRegExp),n+=e;else if(s(e.charCodeAt(0)))M({},dn.UnterminatedRegExp);else if(i)"]"===e&&(i=!1);else{if("/"===e){r=!0;break}"["===e&&(i=!0)}return r||M({},dn.UnterminatedRegExp),a=n.substr(1,n.length-2),{value:a,literal:n}}function P(){var e,t,n,i;for(t="",n="";bn>vn&&(e=Sn[vn],u(e.charCodeAt(0)));)if(++vn,"\\"===e&&bn>vn)if(e=Sn[vn],"u"===e){if(++vn,i=vn,e=S("u"))for(n+=e,t+="\\u";vn>i;++i)t+=Sn[i];else vn=i,n+="u",t+="\\u";z({},dn.UnexpectedToken,"ILLEGAL")}else t+="\\",z({},dn.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function N(){var e,t,n,i;return Cn=null,y(),e=vn,t=A(),n=P(),i=L(t.value,n.value),kn.tokenize?{type:ln.RegularExpression,value:i,lineNumber:wn,lineStart:xn,start:e,end:vn}:{literal:t.literal+n.literal,value:i,start:e,end:vn}}function U(){var e,t,n,i;return y(),e=vn,t={start:{line:wn,column:vn-xn}},n=N(),t.end={line:wn,column:vn-xn},kn.tokenize||(kn.tokens.length>0&&(i=kn.tokens[kn.tokens.length-1],i.range[0]===e&&"Punctuator"===i.type&&("/"===i.value||"/="===i.value)&&kn.tokens.pop()),kn.tokens.push({type:"RegularExpression",value:n.literal,range:[e,vn],loc:t})),n}function O(e){return e.type===ln.Identifier||e.type===ln.Keyword||e.type===ln.BooleanLiteral||e.type===ln.NullLiteral}function F(){var e,t;if(e=kn.tokens[kn.tokens.length-1],!e)return U();if("Punctuator"===e.type){if("]"===e.value)return b();if(")"===e.value)return t=kn.tokens[kn.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?b():U();if("}"===e.value){if(kn.tokens[kn.openCurlyToken-3]&&"Keyword"===kn.tokens[kn.openCurlyToken-3].type){if(t=kn.tokens[kn.openCurlyToken-4],!t)return b()}else{if(!kn.tokens[kn.openCurlyToken-4]||"Keyword"!==kn.tokens[kn.openCurlyToken-4].type)return b();if(t=kn.tokens[kn.openCurlyToken-5],!t)return U()}return hn.indexOf(t.value)>=0?b():U()}return U()}return"Keyword"===e.type?U():b()}function T(){var e;return y(),vn>=bn?{type:ln.EOF,lineNumber:wn,lineStart:xn,start:vn,end:vn}:(e=Sn.charCodeAt(vn),o(e)?x():40===e||41===e||59===e?b():39===e||34===e?I():46===e?n(Sn.charCodeAt(vn+1))?k():b():n(e)?k():kn.tokenize&&47===e?F():b())}function R(){var e,t,n;return y(),e={start:{line:wn,column:vn-xn}},t=T(),e.end={line:wn,column:vn-xn},t.type!==ln.EOF&&(n=Sn.slice(t.start,t.end),kn.tokens.push({type:cn[t.type],value:n,range:[t.start,t.end],loc:e})),t}function D(){var e;return e=Cn,vn=e.end,wn=e.lineNumber,xn=e.lineStart,Cn="undefined"!=typeof kn.tokens?R():T(),vn=e.end,wn=e.lineNumber,xn=e.lineStart,e}function B(){var e,t,n;e=vn,t=wn,n=xn,Cn="undefined"!=typeof kn.tokens?R():T(),vn=e,wn=t,xn=n}function G(){this.line=wn,this.column=vn-xn}function W(){this.start=new G,this.end=null}function j(e){this.start=e.type===ln.StringLiteral?{line:e.startLineNumber,column:e.start-e.startLineStart}:{line:e.lineNumber,column:e.start-e.lineStart},this.end=null}function H(){vn=Cn.start,Cn.type===ln.StringLiteral?(wn=Cn.startLineNumber,xn=Cn.startLineStart):(wn=Cn.lineNumber,xn=Cn.lineStart),kn.range&&(this.range=[vn,0]),kn.loc&&(this.loc=new W)}function K(e){kn.range&&(this.range=[e.start,0]),kn.loc&&(this.loc=new j(e))}function V(){var e,t,n,i;return e=vn,t=wn,n=xn,y(),i=wn!==t,vn=e,wn=t,xn=n,i}function M(e,n){var i,r=Array.prototype.slice.call(arguments,2),a=n.replace(/%(\d)/g,function(e,n){return t(n<r.length,"Message reference must be in range"),r[n]});throw"number"==typeof e.lineNumber?(i=new Error("Line "+e.lineNumber+": "+a),i.index=e.start,i.lineNumber=e.lineNumber,i.column=e.start-xn+1):(i=new Error("Line "+wn+": "+a),i.index=vn,i.lineNumber=wn,i.column=vn-xn+1),i.description=a,i}function z(){try{M.apply(null,arguments)}catch(e){if(!kn.errors)throw e;kn.errors.push(e)}}function q(e){if(e.type===ln.EOF&&M(e,dn.UnexpectedEOS),e.type===ln.NumericLiteral&&M(e,dn.UnexpectedNumber),e.type===ln.StringLiteral&&M(e,dn.UnexpectedString),e.type===ln.Identifier&&M(e,dn.UnexpectedIdentifier),e.type===ln.Keyword){if(l(e.value))M(e,dn.UnexpectedReserved);else if(gn&&c(e.value))return void z(e,dn.StrictReservedWord);M(e,dn.UnexpectedToken,e.value)}M(e,dn.UnexpectedToken,e.value)}function $(e){var t=D();(t.type!==ln.Punctuator||t.value!==e)&&q(t)}function X(e){if(kn.errors){var t=Cn;t.type!==ln.Punctuator&&t.value!==e?z(t,dn.UnexpectedToken,t.value):D()}else $(e)}function J(e){var t=D();(t.type!==ln.Keyword||t.value!==e)&&q(t)}function Q(e){return Cn.type===ln.Punctuator&&Cn.value===e}function Y(e){return Cn.type===ln.Keyword&&Cn.value===e}function Z(){var e;return Cn.type!==ln.Punctuator?!1:(e=Cn.value,"="===e||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function _(){var e;return 59===Sn.charCodeAt(vn)||Q(";")?void D():(e=wn,y(),void(wn===e&&(Cn.type===ln.EOF||Q("}")||q(Cn))))}function et(e){return e.type===fn.Identifier||e.type===fn.MemberExpression}function tt(){var e=[],t=new H;for($("[");!Q("]");)Q(",")?(D(),e.push(null)):(e.push(Ct()),Q("]")||$(","));return D(),t.finishArrayExpression(e)}function nt(e,t){var n,i,r=new H;return n=gn,i=Qt(),t&&gn&&h(e[0].name)&&z(t,dn.StrictParamName),gn=n,r.finishFunctionExpression(null,e,[],i)}function it(){var e,t=new H;return e=D(),e.type===ln.StringLiteral||e.type===ln.NumericLiteral?(gn&&e.octal&&z(e,dn.StrictOctalLiteral),t.finishLiteral(e)):t.finishIdentifier(e.value)}function rt(){var e,t,n,i,r,a=new H;return e=Cn,e.type===ln.Identifier?(n=it(),"get"!==e.value||Q(":")?"set"!==e.value||Q(":")?($(":"),i=Ct(),a.finishProperty("init",n,i)):(t=it(),$("("),e=Cn,e.type!==ln.Identifier?($(")"),z(e,dn.UnexpectedToken,e.value),i=nt([])):(r=[Lt()],$(")"),i=nt(r,e)),a.finishProperty("set",t,i)):(t=it(),$("("),$(")"),i=nt([]),a.finishProperty("get",t,i))):e.type!==ln.EOF&&e.type!==ln.Punctuator?(t=it(),$(":"),i=Ct(),a.finishProperty("init",t,i)):void q(e)}function at(){var e,t,n,i,r=[],a={},s=String,o=new H;for($("{");!Q("}");)e=rt(),t=e.key.type===fn.Identifier?e.key.name:s(e.key.value),i="init"===e.kind?mn.Data:"get"===e.kind?mn.Get:mn.Set,n="$"+t,Object.prototype.hasOwnProperty.call(a,n)?(a[n]===mn.Data?gn&&i===mn.Data?z({},dn.StrictDuplicateProperty):i!==mn.Data&&z({},dn.AccessorDataProperty):i===mn.Data?z({},dn.AccessorDataProperty):a[n]&i&&z({},dn.AccessorGetSet),a[n]|=i):a[n]=i,r.push(e),Q("}")||X(",");return $("}"),o.finishObjectExpression(r)}function st(){var e;return $("("),Q(")")?(D(),pn.ArrowParameterPlaceHolder):(++En.parenthesisCount,e=Et(),$(")"),e)}function ot(){var e,t,n,i;if(Q("("))return st();if(Q("["))return tt();if(Q("{"))return at();if(e=Cn.type,i=new H,e===ln.Identifier)n=i.finishIdentifier(D().value);else if(e===ln.StringLiteral||e===ln.NumericLiteral)gn&&Cn.octal&&z(Cn,dn.StrictOctalLiteral),n=i.finishLiteral(D());else if(e===ln.Keyword){if(Y("function"))return tn();Y("this")?(D(),n=i.finishThisExpression()):q(D())}else e===ln.BooleanLiteral?(t=D(),t.value="true"===t.value,n=i.finishLiteral(t)):e===ln.NullLiteral?(t=D(),t.value=null,n=i.finishLiteral(t)):Q("/")||Q("/=")?(n=i.finishLiteral("undefined"!=typeof kn.tokens?U():N()),B()):q(D());return n}function ut(){var e=[];if($("("),!Q(")"))for(;bn>vn&&(e.push(Ct()),!Q(")"));)X(",");return $(")"),e}function lt(){var e,t=new H;return e=D(),O(e)||q(e),t.finishIdentifier(e.value)}function ct(){return $("."),lt()}function ht(){var e;return $("["),e=Et(),$("]"),e}function ft(){var e,t,n=new H;return J("new"),e=mt(),t=Q("(")?ut():[],n.finishNewExpression(e,t)}function pt(){var e,t,n,i,r=En.allowIn;for(i=Cn,En.allowIn=!0,e=Y("new")?ft():ot();;)if(Q("."))n=ct(),e=new K(i).finishMemberExpression(".",e,n);else if(Q("("))t=ut(),e=new K(i).finishCallExpression(e,t);else{if(!Q("["))break;n=ht(),e=new K(i).finishMemberExpression("[",e,n)}return En.allowIn=r,e}function mt(){var e,n,i;for(t(En.allowIn,"callee of new expression always allow in keyword."),i=Cn,e=Y("new")?ft():ot();;)if(Q("["))n=ht(),e=new K(i).finishMemberExpression("[",e,n);else{if(!Q("."))break;n=ct(),e=new K(i).finishMemberExpression(".",e,n)}return e}function dt(){var e,t,n=Cn;return e=pt(),Cn.type===ln.Punctuator&&(!Q("++")&&!Q("--")||V()||(gn&&e.type===fn.Identifier&&h(e.name)&&z({},dn.StrictLHSPostfix),et(e)||z({},dn.InvalidLHSInAssignment),t=D(),e=new K(n).finishPostfixExpression(t.value,e))),e}function yt(){var e,t,n;return Cn.type!==ln.Punctuator&&Cn.type!==ln.Keyword?t=dt():Q("++")||Q("--")?(n=Cn,e=D(),t=yt(),gn&&t.type===fn.Identifier&&h(t.name)&&z({},dn.StrictLHSPrefix),et(t)||z({},dn.InvalidLHSInAssignment),t=new K(n).finishUnaryExpression(e.value,t)):Q("+")||Q("-")||Q("~")||Q("!")?(n=Cn,e=D(),t=yt(),t=new K(n).finishUnaryExpression(e.value,t)):Y("delete")||Y("void")||Y("typeof")?(n=Cn,e=D(),t=yt(),t=new K(n).finishUnaryExpression(e.value,t),gn&&"delete"===t.operator&&t.argument.type===fn.Identifier&&z({},dn.StrictDelete)):t=dt(),t}function St(e,t){var n=0;if(e.type!==ln.Punctuator&&e.type!==ln.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function gt(){var e,t,n,i,r,a,s,o,u,l;if(e=Cn,u=yt(),u===pn.ArrowParameterPlaceHolder)return u;if(i=Cn,r=St(i,En.allowIn),0===r)return u;for(i.prec=r,D(),t=[e,Cn],s=yt(),a=[u,i,s];(r=St(Cn,En.allowIn))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,u=a.pop(),t.pop(),n=new K(t[t.length-1]).finishBinaryExpression(o,u,s),a.push(n);i=D(),i.prec=r,a.push(i),t.push(Cn),n=yt(),a.push(n)}for(l=a.length-1,n=a[l],t.pop();l>1;)n=new K(t.pop()).finishBinaryExpression(a[l-1].value,a[l-2],n),l-=2;return n}function vt(){var e,t,n,i,r;return r=Cn,e=gt(),e===pn.ArrowParameterPlaceHolder?e:(Q("?")&&(D(),t=En.allowIn,En.allowIn=!0,n=Ct(),En.allowIn=t,$(":"),i=Ct(),e=new K(r).finishConditionalExpression(e,n,i)),e)}function wt(){return Q("{")?Qt():Ct()}function xt(e){var t,n,i,r,a,s,o,u;for(r=[],a=[],s=0,u=null,o={paramSet:{}},t=0,n=e.length;n>t;t+=1)if(i=e[t],i.type===fn.Identifier)r.push(i),a.push(null),Yt(o,i,i.name);else{if(i.type!==fn.AssignmentExpression)return null;r.push(i.left),a.push(i.right),++s,Yt(o,i.left,i.left.name)}return o.message===dn.StrictParamDupe&&M(gn?o.stricted:o.firstRestricted,o.message),0===s&&(a=[]),{params:r,defaults:a,rest:u,stricted:o.stricted,firstRestricted:o.firstRestricted,message:o.message}}function bt(e,t){var n,i;return $("=>"),n=gn,i=wt(),gn&&e.firstRestricted&&M(e.firstRestricted,e.message),gn&&e.stricted&&z(e.stricted,e.message),gn=n,t.finishArrowFunctionExpression(e.params,e.defaults,i,i.type!==fn.BlockStatement)}function Ct(){var e,t,n,i,r,a;return e=En.parenthesisCount,a=Cn,t=Cn,n=vt(),n!==pn.ArrowParameterPlaceHolder&&!Q("=>")||En.parenthesisCount!==e&&En.parenthesisCount!==e+1||(n.type===fn.Identifier?r=xt([n]):n.type===fn.AssignmentExpression?r=xt([n]):n.type===fn.SequenceExpression?r=xt(n.expressions):n===pn.ArrowParameterPlaceHolder&&(r=xt([])),!r)?(Z()&&(et(n)||z({},dn.InvalidLHSInAssignment),gn&&n.type===fn.Identifier&&h(n.name)&&z(t,dn.StrictLHSAssignment),t=D(),i=Ct(),n=new K(a).finishAssignmentExpression(t.value,n,i)),n):bt(r,new K(a))}function Et(){var e,t,n=Cn;if(e=Ct(),Q(",")){for(t=[e];bn>vn&&Q(",");)D(),t.push(Ct());e=new K(n).finishSequenceExpression(t)}return e}function kt(){for(var e,t=[];bn>vn&&!Q("}")&&(e=nn(),"undefined"!=typeof e);)t.push(e);return t}function It(){var e,t=new H;return $("{"),e=kt(),$("}"),t.finishBlockStatement(e)}function Lt(){var e,t=new H;return e=D(),e.type!==ln.Identifier&&q(e),t.finishIdentifier(e.value)}function At(e){var t,n=null,i=new H;return t=Lt(),gn&&h(t.name)&&z({},dn.StrictVarName),"const"===e?($("="),n=Ct()):Q("=")&&(D(),n=Ct()),i.finishVariableDeclarator(t,n)}function Pt(e){var t=[];do{if(t.push(At(e)),!Q(","))break;D()}while(bn>vn);return t}function Nt(e){var t;return J("var"),t=Pt(),_(),e.finishVariableDeclaration(t,"var")}function Ut(e){var t,n=new H;return J(e),t=Pt(e),_(),n.finishVariableDeclaration(t,e)}function Ot(){var e=new H;return $(";"),e.finishEmptyStatement()}function Ft(e){var t=Et();return _(),e.finishExpressionStatement(t)}function Tt(e){var t,n,i;return J("if"),$("("),t=Et(),$(")"),n=Jt(),Y("else")?(D(),i=Jt()):i=null,e.finishIfStatement(t,n,i)}function Rt(e){var t,n,i;return J("do"),i=En.inIteration,En.inIteration=!0,t=Jt(),En.inIteration=i,J("while"),$("("),n=Et(),$(")"),Q(";")&&D(),e.finishDoWhileStatement(t,n)}function Dt(e){var t,n,i;return J("while"),$("("),t=Et(),$(")"),i=En.inIteration,En.inIteration=!0,n=Jt(),En.inIteration=i,e.finishWhileStatement(t,n)}function Bt(){var e,t,n=new H;return e=D(),t=Pt(),n.finishVariableDeclaration(t,e.value)}function Gt(e){var t,n,i,r,a,s,o,u=En.allowIn;return t=n=i=null,J("for"),$("("),Q(";")?D():(Y("var")||Y("let")?(En.allowIn=!1,t=Bt(),En.allowIn=u,1===t.declarations.length&&Y("in")&&(D(),r=t,a=Et(),t=null)):(En.allowIn=!1,t=Et(),En.allowIn=u,Y("in")&&(et(t)||z({},dn.InvalidLHSInForIn),D(),r=t,a=Et(),t=null)),"undefined"==typeof r&&$(";")),"undefined"==typeof r&&(Q(";")||(n=Et()),$(";"),Q(")")||(i=Et())),$(")"),o=En.inIteration,En.inIteration=!0,s=Jt(),En.inIteration=o,"undefined"==typeof r?e.finishForStatement(t,n,i,s):e.finishForInStatement(r,a,s)}function Wt(e){var t,n=null;return J("continue"),59===Sn.charCodeAt(vn)?(D(),En.inIteration||M({},dn.IllegalContinue),e.finishContinueStatement(null)):V()?(En.inIteration||M({},dn.IllegalContinue),e.finishContinueStatement(null)):(Cn.type===ln.Identifier&&(n=Lt(),t="$"+n.name,Object.prototype.hasOwnProperty.call(En.labelSet,t)||M({},dn.UnknownLabel,n.name)),_(),null!==n||En.inIteration||M({},dn.IllegalContinue),e.finishContinueStatement(n))}function jt(e){var t,n=null;return J("break"),59===Sn.charCodeAt(vn)?(D(),En.inIteration||En.inSwitch||M({},dn.IllegalBreak),e.finishBreakStatement(null)):V()?(En.inIteration||En.inSwitch||M({},dn.IllegalBreak),e.finishBreakStatement(null)):(Cn.type===ln.Identifier&&(n=Lt(),t="$"+n.name,Object.prototype.hasOwnProperty.call(En.labelSet,t)||M({},dn.UnknownLabel,n.name)),_(),null!==n||En.inIteration||En.inSwitch||M({},dn.IllegalBreak),e.finishBreakStatement(n))}function Ht(e){var t=null;return J("return"),En.inFunctionBody||z({},dn.IllegalReturn),32===Sn.charCodeAt(vn)&&o(Sn.charCodeAt(vn+1))?(t=Et(),_(),e.finishReturnStatement(t)):V()?e.finishReturnStatement(null):(Q(";")||Q("}")||Cn.type===ln.EOF||(t=Et()),_(),e.finishReturnStatement(t))}function Kt(e){var t,n;return gn&&(y(),z({},dn.StrictModeWith)),J("with"),$("("),t=Et(),$(")"),n=Jt(),e.finishWithStatement(t,n)}function Vt(){var e,t,n=[],i=new H;for(Y("default")?(D(),e=null):(J("case"),e=Et()),$(":");bn>vn&&!(Q("}")||Y("default")||Y("case"));)t=Jt(),n.push(t);return i.finishSwitchCase(e,n)}function Mt(e){var t,n,i,r,a;if(J("switch"),$("("),t=Et(),$(")"),$("{"),n=[],Q("}"))return D(),e.finishSwitchStatement(t,n);for(r=En.inSwitch,En.inSwitch=!0,a=!1;bn>vn&&!Q("}");)i=Vt(),null===i.test&&(a&&M({},dn.MultipleDefaultsInSwitch),a=!0),n.push(i);return En.inSwitch=r,$("}"),e.finishSwitchStatement(t,n)}function zt(e){var t;return J("throw"),V()&&M({},dn.NewlineAfterThrow),t=Et(),_(),e.finishThrowStatement(t)}function qt(){var e,t,n=new H;return J("catch"),$("("),Q(")")&&q(Cn),e=Lt(),gn&&h(e.name)&&z({},dn.StrictCatchVariable),$(")"),t=It(),n.finishCatchClause(e,t)}function $t(e){var t,n=[],i=null;return J("try"),t=It(),Y("catch")&&n.push(qt()),Y("finally")&&(D(),i=It()),0!==n.length||i||M({},dn.NoCatchOrFinally),e.finishTryStatement(t,[],n,i)}function Xt(e){return J("debugger"),_(),e.finishDebuggerStatement()}function Jt(){var e,t,n,i,r=Cn.type;if(r===ln.EOF&&q(Cn),r===ln.Punctuator&&"{"===Cn.value)return It();if(i=new H,r===ln.Punctuator)switch(Cn.value){case";":return Ot(i);case"(":return Ft(i)}else if(r===ln.Keyword)switch(Cn.value){case"break":return jt(i);case"continue":return Wt(i);case"debugger":return Xt(i);case"do":return Rt(i);case"for":return Gt(i);case"function":return en(i);case"if":return Tt(i);case"return":return Ht(i);case"switch":return Mt(i);case"throw":return zt(i);case"try":return $t(i);case"var":return Nt(i);case"while":return Dt(i);case"with":return Kt(i)}return e=Et(),e.type===fn.Identifier&&Q(":")?(D(),n="$"+e.name,Object.prototype.hasOwnProperty.call(En.labelSet,n)&&M({},dn.Redeclaration,"Label",e.name),En.labelSet[n]=!0,t=Jt(),delete En.labelSet[n],i.finishLabeledStatement(e,t)):(_(),i.finishExpressionStatement(e))}function Qt(){var e,t,n,i,r,a,s,o,u,l=[],c=new H;for($("{");bn>vn&&Cn.type===ln.StringLiteral&&(t=Cn,e=nn(),l.push(e),e.expression.type===fn.Literal);)n=Sn.slice(t.start+1,t.end-1),"use strict"===n?(gn=!0,i&&z(i,dn.StrictOctalLiteral)):!i&&t.octal&&(i=t);for(r=En.labelSet,a=En.inIteration,s=En.inSwitch,o=En.inFunctionBody,u=En.parenthesizedCount,En.labelSet={},En.inIteration=!1,En.inSwitch=!1,En.inFunctionBody=!0,En.parenthesizedCount=0;bn>vn&&!Q("}")&&(e=nn(),"undefined"!=typeof e);)l.push(e);return $("}"),En.labelSet=r,En.inIteration=a,En.inSwitch=s,En.inFunctionBody=o,En.parenthesizedCount=u,c.finishBlockStatement(l)}function Yt(e,t,n){var i="$"+n;gn?(h(n)&&(e.stricted=t,e.message=dn.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,i)&&(e.stricted=t,e.message=dn.StrictParamDupe)):e.firstRestricted||(h(n)?(e.firstRestricted=t,e.message=dn.StrictParamName):c(n)?(e.firstRestricted=t,e.message=dn.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,i)&&(e.firstRestricted=t,e.message=dn.StrictParamDupe)),e.paramSet[i]=!0}function Zt(e){var t,n,i;return t=Cn,n=Lt(),Yt(e,t,t.value),Q("=")&&(D(),i=Ct(),++e.defaultCount),e.params.push(n),e.defaults.push(i),!Q(")")}function _t(e){var t;if(t={params:[],defaultCount:0,defaults:[],firstRestricted:e},$("("),!Q(")"))for(t.paramSet={};bn>vn&&Zt(t);)$(",");return $(")"),0===t.defaultCount&&(t.defaults=[]),{params:t.params,defaults:t.defaults,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}}function en(){var e,t,n,i,r,a,s,o,u=[],l=[],f=new H;return J("function"),n=Cn,e=Lt(),gn?h(n.value)&&z(n,dn.StrictFunctionName):h(n.value)?(a=n,s=dn.StrictFunctionName):c(n.value)&&(a=n,s=dn.StrictReservedWord),r=_t(a),u=r.params,l=r.defaults,i=r.stricted,a=r.firstRestricted,r.message&&(s=r.message),o=gn,t=Qt(),gn&&a&&M(a,s),gn&&i&&z(i,s),gn=o,f.finishFunctionDeclaration(e,u,l,t)}function tn(){var e,t,n,i,r,a,s,o=null,u=[],l=[],f=new H;return J("function"),Q("(")||(e=Cn,o=Lt(),gn?h(e.value)&&z(e,dn.StrictFunctionName):h(e.value)?(n=e,i=dn.StrictFunctionName):c(e.value)&&(n=e,i=dn.StrictReservedWord)),r=_t(n),u=r.params,l=r.defaults,t=r.stricted,n=r.firstRestricted,r.message&&(i=r.message),s=gn,a=Qt(),gn&&n&&M(n,i),gn&&t&&z(t,i),gn=s,f.finishFunctionExpression(o,u,l,a)}function nn(){if(Cn.type===ln.Keyword)switch(Cn.value){case"const":case"let":return Ut(Cn.value);case"function":return en();default:return Jt()}return Cn.type!==ln.EOF?Jt():void 0}function rn(){for(var e,t,n,i,r=[];bn>vn&&(t=Cn,t.type===ln.StringLiteral)&&(e=nn(),r.push(e),e.expression.type===fn.Literal);)n=Sn.slice(t.start+1,t.end-1),"use strict"===n?(gn=!0,i&&z(i,dn.StrictOctalLiteral)):!i&&t.octal&&(i=t);for(;bn>vn&&(e=nn(),"undefined"!=typeof e);)r.push(e);return r}function an(){var e,t;return y(),B(),t=new H,gn=!1,e=rn(),t.finishProgram(e)}function sn(){var e,t,n,i=[];for(e=0;e<kn.tokens.length;++e)t=kn.tokens[e],n={type:t.type,value:t.value},kn.range&&(n.range=t.range),kn.loc&&(n.loc=t.loc),i.push(n);kn.tokens=i}function on(e,t){var n,i;n=String,"string"==typeof e||e instanceof String||(e=n(e)),Sn=e,vn=0,wn=Sn.length>0?1:0,xn=0,bn=Sn.length,Cn=null,En={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},kn={},t=t||{},t.tokens=!0,kn.tokens=[],kn.tokenize=!0,kn.openParenToken=-1,kn.openCurlyToken=-1,kn.range="boolean"==typeof t.range&&t.range,kn.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(kn.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(kn.errors=[]);try{if(B(),Cn.type===ln.EOF)return kn.tokens;for(D();Cn.type!==ln.EOF;)try{D()}catch(r){if(kn.errors){kn.errors.push(r);break}throw r}sn(),i=kn.tokens,"undefined"!=typeof kn.comments&&(i.comments=kn.comments),"undefined"!=typeof kn.errors&&(i.errors=kn.errors)}catch(a){throw a}finally{kn={}}return i}function un(e,t){var n,i;i=String,"string"==typeof e||e instanceof String||(e=i(e)),Sn=e,vn=0,wn=Sn.length>0?1:0,xn=0,bn=Sn.length,Cn=null,En={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},kn={},"undefined"!=typeof t&&(kn.range="boolean"==typeof t.range&&t.range,kn.loc="boolean"==typeof t.loc&&t.loc,kn.attachComment="boolean"==typeof t.attachComment&&t.attachComment,kn.loc&&null!==t.source&&void 0!==t.source&&(kn.source=i(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(kn.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(kn.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(kn.errors=[]),kn.attachComment&&(kn.range=!0,kn.comments=[],kn.bottomRightStack=[],kn.trailingComments=[],kn.leadingComments=[]));try{n=an(),"undefined"!=typeof kn.comments&&(n.comments=kn.comments),"undefined"!=typeof kn.tokens&&(sn(),n.tokens=kn.tokens),"undefined"!=typeof kn.errors&&(n.errors=kn.errors)}catch(r){throw r}finally{kn={}}return n}var ln,cn,hn,fn,pn,mn,dn,yn,Sn,gn,vn,wn,xn,bn,Cn,En,kn;ln={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},cn={},cn[ln.BooleanLiteral]="Boolean",cn[ln.EOF]="<end>",cn[ln.Identifier]="Identifier",cn[ln.Keyword]="Keyword",cn[ln.NullLiteral]="Null",cn[ln.NumericLiteral]="Numeric",cn[ln.Punctuator]="Punctuator",cn[ln.StringLiteral]="String",cn[ln.RegularExpression]="RegularExpression",hn=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],fn={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},pn={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}},mn={Data:1,Get:2,Set:4},dn={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},yn={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},K.prototype=H.prototype={processComment:function(){var e,t,n=kn.bottomRightStack,i=n[n.length-1];
if(!(this.type===fn.Program&&this.body.length>0)){if(kn.trailingComments.length>0?kn.trailingComments[0].range[0]>=this.range[1]?(t=kn.trailingComments,kn.trailingComments=[]):kn.trailingComments.length=0:i&&i.trailingComments&&i.trailingComments[0].range[0]>=this.range[1]&&(t=i.trailingComments,delete i.trailingComments),i)for(;i&&i.range[0]>=this.range[0];)e=i,i=n.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=e.leadingComments,e.leadingComments=void 0):kn.leadingComments.length>0&&kn.leadingComments[kn.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=kn.leadingComments,kn.leadingComments=[]),t&&(this.trailingComments=t),n.push(this)}},finish:function(){kn.range&&(this.range[1]=vn),kn.loc&&(this.loc.end=new G,kn.source&&(this.loc.source=kn.source)),kn.attachComment&&this.processComment()},finishArrayExpression:function(e){return this.type=fn.ArrayExpression,this.elements=e,this.finish(),this},finishArrowFunctionExpression:function(e,t,n,i){return this.type=fn.ArrowFunctionExpression,this.id=null,this.params=e,this.defaults=t,this.body=n,this.rest=null,this.generator=!1,this.expression=i,this.finish(),this},finishAssignmentExpression:function(e,t,n){return this.type=fn.AssignmentExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBinaryExpression:function(e,t,n){return this.type="||"===e||"&&"===e?fn.LogicalExpression:fn.BinaryExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBlockStatement:function(e){return this.type=fn.BlockStatement,this.body=e,this.finish(),this},finishBreakStatement:function(e){return this.type=fn.BreakStatement,this.label=e,this.finish(),this},finishCallExpression:function(e,t){return this.type=fn.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishCatchClause:function(e,t){return this.type=fn.CatchClause,this.param=e,this.body=t,this.finish(),this},finishConditionalExpression:function(e,t,n){return this.type=fn.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishContinueStatement:function(e){return this.type=fn.ContinueStatement,this.label=e,this.finish(),this},finishDebuggerStatement:function(){return this.type=fn.DebuggerStatement,this.finish(),this},finishDoWhileStatement:function(e,t){return this.type=fn.DoWhileStatement,this.body=e,this.test=t,this.finish(),this},finishEmptyStatement:function(){return this.type=fn.EmptyStatement,this.finish(),this},finishExpressionStatement:function(e){return this.type=fn.ExpressionStatement,this.expression=e,this.finish(),this},finishForStatement:function(e,t,n,i){return this.type=fn.ForStatement,this.init=e,this.test=t,this.update=n,this.body=i,this.finish(),this},finishForInStatement:function(e,t,n){return this.type=fn.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1,this.finish(),this},finishFunctionDeclaration:function(e,t,n,i){return this.type=fn.FunctionDeclaration,this.id=e,this.params=t,this.defaults=n,this.body=i,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishFunctionExpression:function(e,t,n,i){return this.type=fn.FunctionExpression,this.id=e,this.params=t,this.defaults=n,this.body=i,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishIdentifier:function(e){return this.type=fn.Identifier,this.name=e,this.finish(),this},finishIfStatement:function(e,t,n){return this.type=fn.IfStatement,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishLabeledStatement:function(e,t){return this.type=fn.LabeledStatement,this.label=e,this.body=t,this.finish(),this},finishLiteral:function(e){return this.type=fn.Literal,this.value=e.value,this.raw=Sn.slice(e.start,e.end),this.finish(),this},finishMemberExpression:function(e,t,n){return this.type=fn.MemberExpression,this.computed="["===e,this.object=t,this.property=n,this.finish(),this},finishNewExpression:function(e,t){return this.type=fn.NewExpression,this.callee=e,this.arguments=t,this.finish(),this},finishObjectExpression:function(e){return this.type=fn.ObjectExpression,this.properties=e,this.finish(),this},finishPostfixExpression:function(e,t){return this.type=fn.UpdateExpression,this.operator=e,this.argument=t,this.prefix=!1,this.finish(),this},finishProgram:function(e){return this.type=fn.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,n){return this.type=fn.Property,this.key=t,this.value=n,this.kind=e,this.finish(),this},finishReturnStatement:function(e){return this.type=fn.ReturnStatement,this.argument=e,this.finish(),this},finishSequenceExpression:function(e){return this.type=fn.SequenceExpression,this.expressions=e,this.finish(),this},finishSwitchCase:function(e,t){return this.type=fn.SwitchCase,this.test=e,this.consequent=t,this.finish(),this},finishSwitchStatement:function(e,t){return this.type=fn.SwitchStatement,this.discriminant=e,this.cases=t,this.finish(),this},finishThisExpression:function(){return this.type=fn.ThisExpression,this.finish(),this},finishThrowStatement:function(e){return this.type=fn.ThrowStatement,this.argument=e,this.finish(),this},finishTryStatement:function(e,t,n,i){return this.type=fn.TryStatement,this.block=e,this.guardedHandlers=t,this.handlers=n,this.finalizer=i,this.finish(),this},finishUnaryExpression:function(e,t){return this.type="++"===e||"--"===e?fn.UpdateExpression:fn.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this},finishVariableDeclaration:function(e,t){return this.type=fn.VariableDeclaration,this.declarations=e,this.kind=t,this.finish(),this},finishVariableDeclarator:function(e,t){return this.type=fn.VariableDeclarator,this.id=e,this.init=t,this.finish(),this},finishWhileStatement:function(e,t){return this.type=fn.WhileStatement,this.test=e,this.body=t,this.finish(),this},finishWithStatement:function(e,t){return this.type=fn.WithStatement,this.object=e,this.body=t,this.finish(),this}},e.version="2.0.0-dev",e.tokenize=on,e.parse=un,e.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in fn)fn.hasOwnProperty(e)&&(t[e]=fn[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()});
//estraverse
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof exports?exports:e.estraverse={})}(this,function(e){"use strict";function t(){}function n(e){var t,r,i={};for(t in e)e.hasOwnProperty(t)&&(r=e[t],i[t]="object"==typeof r&&null!==r?n(r):r);return i}function r(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function i(e,t){var n,r,i,s;for(r=e.length,i=0;r;)n=r>>>1,s=i+n,t(e[s])?r=n:(i=s+1,r-=n+1);return i}function s(e,t){var n,r,i,s;for(r=e.length,i=0;r;)n=r>>>1,s=i+n,t(e[s])?(i=s+1,r-=n+1):r=n;return i}function a(e,t){this.parent=e,this.key=t}function o(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function l(){}function p(e,t){var n=new l;return n.traverse(e,t)}function u(e,t){var n=new l;return n.replace(e,t)}function h(e,t){var n;return n=i(t,function(t){return t.range[0]>e.range[0]}),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),n-=1,n>=0&&(e.extendedRange[0]=t[n].range[1]),e}function c(e,t,r){var i,s,a,o,l=[];if(!e.range)throw new Error("attachComments needs range information");if(!r.length){if(t.length){for(a=0,s=t.length;s>a;a+=1)i=n(t[a]),i.extendedRange=[0,e.range[0]],l.push(i);e.leadingComments=l}return e}for(a=0,s=t.length;s>a;a+=1)l.push(h(n(t[a]),r));return o=0,p(e,{enter:function(e){for(var t;o<l.length&&(t=l[o],!(t.extendedRange[1]>e.range[0]));)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),l.splice(o,1)):o+=1;return o===l.length?f.Break:l[o].extendedRange[0]>e.range[1]?f.Skip:void 0}}),o=0,p(e,{leave:function(e){for(var t;o<l.length&&(t=l[o],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),l.splice(o,1)):o+=1;return o===l.length?f.Break:l[o].extendedRange[0]>e.range[1]?f.Skip:void 0}}),e}var m,d,f,g,x,y;m={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},d=Array.isArray,d||(d=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),t(r),t(s),g={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},x={},y={},f={Break:x,Skip:y},a.prototype.replace=function(e){this.parent[this.key]=e},l.prototype.path=function(){function e(e,t){if(d(t))for(r=0,i=t.length;i>r;++r)e.push(t[r]);else e.push(t)}var t,n,r,i,s,a;if(!this.__current.path)return null;for(s=[],t=2,n=this.__leavelist.length;n>t;++t)a=this.__leavelist[t],e(s,a.path);return e(s,this.__current.path),s},l.prototype.parents=function(){var e,t,n;for(n=[],e=1,t=this.__leavelist.length;t>e;++e)n.push(this.__leavelist[e].node);return n},l.prototype.current=function(){return this.__current.node},l.prototype.__execute=function(e,t){var n,r;return r=void 0,n=this.__current,this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},l.prototype.notify=function(e){this.__state=e},l.prototype.skip=function(){this.notify(y)},l.prototype["break"]=function(){this.notify(x)},l.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null},l.prototype.traverse=function(e,t){var n,r,i,s,a,l,p,u,h,c,f,_;for(this.__initialize(e,t),_={},n=this.__worklist,r=this.__leavelist,n.push(new o(e,null,null,null)),r.push(new o(null,null,null,null));n.length;)if(i=n.pop(),i!==_){if(i.node){if(l=this.__execute(t.enter,i),this.__state===x||l===x)return;if(n.push(_),r.push(i),this.__state===y||l===y)continue;for(s=i.node,a=i.wrap||s.type,c=g[a],u=c.length;(u-=1)>=0;)if(p=c[u],f=s[p])if(d(f))for(h=f.length;(h-=1)>=0;)f[h]&&(i=a!==m.ObjectExpression&&a!==m.ObjectPattern||"properties"!==c[u]?new o(f[h],[p,h],null,null):new o(f[h],[p,h],"Property",null),n.push(i));else n.push(new o(f,p,null,null))}}else if(i=r.pop(),l=this.__execute(t.leave,i),this.__state===x||l===x)return},l.prototype.replace=function(e,t){var n,r,i,s,l,p,u,h,c,f,_,S,E;for(this.__initialize(e,t),_={},n=this.__worklist,r=this.__leavelist,S={root:e},p=new o(e,null,null,new a(S,"root")),n.push(p),r.push(p);n.length;)if(p=n.pop(),p!==_){if(l=this.__execute(t.enter,p),void 0!==l&&l!==x&&l!==y&&(p.ref.replace(l),p.node=l),this.__state===x||l===x)return S.root;if(i=p.node,i&&(n.push(_),r.push(p),this.__state!==y&&l!==y))for(s=p.wrap||i.type,c=g[s],u=c.length;(u-=1)>=0;)if(E=c[u],f=i[E])if(d(f))for(h=f.length;(h-=1)>=0;)f[h]&&(p=s===m.ObjectExpression&&"properties"===c[u]?new o(f[h],[E,h],"Property",new a(f,h)):new o(f[h],[E,h],null,new a(f,h)),n.push(p));else n.push(new o(f,E,null,new a(i,E)))}else if(p=r.pop(),l=this.__execute(t.leave,p),void 0!==l&&l!==x&&l!==y&&p.ref.replace(l),this.__state===x||l===x)return S.root;return S.root},e.version="1.5.1-dev",e.Syntax=m,e.traverse=p,e.replace=u,e.attachComments=c,e.VisitorKeys=g,e.VisitorOption=f,e.Controller=l});


console = {};
console.log = function () {
	postMessage({
		type : 'log',
		value : arguments
	});
};


var parents = [],
	methodeList = [],
	root,
	ast,
	foundClasses = [];

var enter = function(node, parent) {
	checkScopeForClass.call(this, node, parent);
	var objName = '';
	if (node.type == 'FunctionExpression' || node.type == 'FunctionDeclaration') {
		var name = 'Anonymous';
		if (node.type == 'FunctionDeclaration') {
			name = node.id.name
		} else {
			switch (parent.type) {
				case 'VariableDeclarator':
					name = parent.id.name
					break;
				case 'AssignmentExpression':
					if (parent.left.type == 'Identifier') {
						name = parent.left.name;
					} else if (parent.left.type == 'MemberExpression') {
						if (parent.left.object.type == 'MemberExpression' && parent.left.object.property.name == 'prototype') {
							objName = parent.left.object.object.name;
						}
						name = parent.left.property.name;
					}

					break;
				case 'CallExpression':
					if (parent.callee.type == 'Identifier') {
						if (parent.callee.name == 'define') {
							//define module - require/commonjs/brackets ... etc
							name = 'Module define';
						}
					} else if (parent.callee.type == 'FunctionExpression') {
						//eventuel ein js module (function(){})();
						name = 'js Module';
					}
					break;
			}
		}
		//parse comments
		var params = [],
			reTurn = {};

		if('comments' in ast && ast.comments.length > 0){
			for(var k in ast.comments) {
				if (ast.comments[k].type == 'Block' && node.loc.start.line-1 == ast.comments[k].loc.end.line) {
					var value = ast.comments[k].value;
					//split into lines
					//@todo @param {array<Object>} of
					var lines = value.split('\n');
					for(var i in lines) {
						if(lines[i].search('@param') != -1) {
							//extract @param lines
							var reg = /(?:\@param\s\{)(\w+)(?:\}\s)(\w+)/;
							var res = reg.exec(lines[i]);
							if (res != null) {
								params[res[2]] = {
									type : res[1],
									name : res[2]
								};
							}
						} else if (lines[i].search('@return') != -1){
							//extract @return line
							var reg = /(?:\@return\s\{)(\w+)(?:\}\s)(\w+)/;
							var res = reg.exec(lines[i]);
							if (res != null) {
								reTurn.type = res[1];
							}
						}
					}
					break;
				}
			}
		}
		if (name != 'Anonymous') {
			var res = {};
			res.name = name;
			res.params = [];
			res.childs = [];
			res.loc = node.loc;
			//add params
			for (k in node.params) {
				var paramName = node.params[k].name;
				var type = '';
				if (paramName in params) {
					type = params[paramName].type;
				}
				res.params.push({
					name : paramName,
					type : type
				});
			}
			//check 4 class
			if (name in foundClasses) {
				res.type = 'class';
				foundClasses[name] = res;
				parents[parents.length-1].childs.push(res);//same
			} else if(methodeList.indexOf(node) != -1) {
				var clas = foundClasses[objName];
				clas.childs.push(res);//same
				res.type = 'proto';
				//add to class
			} else {
				res.type = 'function';
				parents[parents.length-1].childs.push(res);//same
			}
				parents.push(res);


		} else {
			parents.push({});
			this.skip();
		}
	}
};
var leave = function(node, parent) {
	if (node.type == 'FunctionExpression' || node.type == 'FunctionDeclaration') {
		parents.pop();

	}
};
function checkScopeForClass(node, parent) {
	if(node.type != 'Program' && node.type != 'FunctionExpression' && node.type != 'FunctionDeclaration') return false;
	var childs = (node.type == 'Program')? node.body : node.body.body,
		k,
		tmp,
		scopeVars = {},
		scopeProtos = {},
		objName,
		methodeName;
	for(k in childs) {
		if(childs[k].type == 'VariableDeclaration') {
			if(childs[k].declarations.length == 1
			   && childs[k].declarations[0].init
			   && childs[k].declarations[0].init.type == 'FunctionExpression') {
				//save function name
				scopeVars[childs[k].declarations[0].id.name] = childs[k];
			}
		} else if(childs[k].type == 'FunctionDeclaration') {
			scopeVars[childs[k].id.name] = childs[k];
		} else if(childs[k].type == 'ExpressionStatement'
				  && childs[k].expression.type == 'AssignmentExpression'
				  && childs[k].expression.left.type == 'MemberExpression'
				  && childs[k].expression.left.object.type == 'MemberExpression'
				  && childs[k].expression.left.object.property.name == 'prototype') {
			if(childs[k].expression.right.type == 'FunctionExpression') {
				//save expression root object name
				var funcName = childs[k].expression.left.property.name;//function name
				tmp = childs[k].expression.left.object.object.name//object name
				if(!(tmp in scopeProtos)) {
					scopeProtos[tmp] = {};
				}
				scopeProtos[tmp][funcName] = childs[k].expression.right;

			}
		}
	}

	for(objName in scopeVars) {
		//suche nach
		if(objName in scopeProtos) {

			var protos = []
			for(methodeName in scopeProtos[objName]) {
				methodeList.push(scopeProtos[objName][methodeName]);
				protos.push({
					name : methodeName,
					node : scopeProtos[objName][methodeName]
				});
			}
			foundClasses[objName] = {
				name: objName,
				node: scopeVars[objName],
				protos: protos
			};
		}
	}
}



onmessage = function (e) {
	ast = esprima.parse(e.data, {
		comment : true,
		loc : true,
		tolerant : true
	});
	root = {
		type : 'data',
		name : 'root',
		childs : []
	};
	parents = [root];
	methodeList = [];
	foundClasses = [];

	estraverse.traverse(ast, {
		enter: enter,
		leave: leave
	});
	postMessage(root);
};
